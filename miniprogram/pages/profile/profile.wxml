<!-- 个人中心页面 -->
<view class="profile-page">
  <!-- 用户信息卡片 -->
  <view class="user-card">
    <view class="user-card-glow"></view>
    <view class="user-info">
      <!-- 头像区域 -->
      <view class="avatar-wrapper">
        <block wx:if="{{isLogin}}">
          <button class="avatar-btn" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
            <image class="user-avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill" />
          </button>
          <button class="avatar-edit-btn" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
            ✎
          </button>
        </block>
        <block wx:else>
          <view class="avatar-default">
            <view class="avatar-default-icon"></view>
          </view>
        </block>
      </view>
      <!-- 用户信息区域 -->
      <view class="user-detail">
        <block wx:if="{{isLogin}}">
          <text class="profile-label">个人资料</text>
          <view class="name-editor">
            <input class="user-name" type="nickname" placeholder="点击设置昵称" value="{{userInfo.nickName}}" bindchange="onNicknameChange" focus="{{nameInputFocus}}" bindblur="onNameInputBlur" />
            <text class="name-edit-icon" bindtap="onNameEditTap">✎</text>
          </view>
          <view class="phone-row">
            <button wx:if="{{!userInfo.phone}}" class="bind-phone-btn" open-type="getPhoneNumber" bindgetphonenumber="onBindPhone">
              绑定手机号
            </button>
            <text class="user-meta">{{userInfo.phone ? userInfo.phone : '绑定手机号可提升匹配效率'}}</text>
          </view>
        </block>
        <block wx:else>
          <view class="login-section">
            <button class="login-btn" bindtap="onLogin">点击登录</button>
            <text class="login-tip">登录后享受更多服务</text>
          </view>
        </block>
      </view>
    </view>
  </view>
  <!-- 订单统计 -->
  <view class="stats-card card">
    <view class="stats-item" bindtap="onOrderTap" data-status="all">
      <text class="stats-num">{{orderStats.all}}</text>
      <text class="stats-label">全部订单</text>
    </view>
    <view class="stats-item" bindtap="onOrderTap" data-status="pending">
      <text class="stats-num">{{orderStats.pending}}</text>
      <text class="stats-label">待服务</text>
    </view>
    <view class="stats-item" bindtap="onOrderTap" data-status="serving">
      <text class="stats-num">{{orderStats.serving}}</text>
      <text class="stats-label">服务中</text>
    </view>
    <view class="stats-item" bindtap="onOrderTap" data-status="completed">
      <text class="stats-num">{{orderStats.completed}}</text>
      <text class="stats-label">已完成</text>
    </view>
  </view>
  <!-- 功能菜单 -->
  <view class="menu-section">
    <!-- 我的服务 -->
    <view class="menu-group card" wx:if="{{!isWorker && !isPlatform}}">
      <view class="menu-title">我的服务</view>
      <view class="menu-list">
        <view class="menu-item" bindtap="onMenuTap" data-page="favorites" wx:if="{{!isWorker && !isPlatform}}">
          <text class="menu-icon">⭐</text>
          <text class="menu-text">我的收藏</text>
          <text class="menu-arrow">></text>
        </view>
        <view class="menu-item" bindtap="onMenuTap" data-page="bookings" wx:if="{{!isWorker}}">
          <text class="menu-icon">🗂️</text>
          <text class="menu-text">我的预约</text>
          <text class="menu-arrow">></text>
        </view>
        <view class="menu-item" bindtap="onMenuTap" data-page="address" wx:if="{{!isWorker}}">
          <text class="menu-icon">📍</text>
          <text class="menu-text">服务地址</text>
          <text class="menu-arrow">></text>
        </view>
      </view>
    </view>
    <!-- 阿姨服务 -->
    <view class="menu-group card" wx:if="{{isLogin && !isPlatform}}">
      <view class="menu-title">阿姨服务</view>
      <view class="menu-list">
        <!-- 未注册为阿姨 -->
        <view class="menu-item" bindtap="onRegisterWorker" wx:if="{{!isWorker}}">
          <text class="menu-icon">👩</text>
          <text class="menu-text">注册为阿姨</text>
          <text class="menu-arrow">></text>
        </view>
        <view class="menu-item" bindtap="onMenuTap" data-page="workerSettings" wx:if="{{isWorker}}">
          <text class="menu-icon">⚙️</text>
          <text class="menu-text">我的接单设置</text>
          <text class="menu-arrow">></text>
        </view>
        <view class="menu-item" bindtap="onMenuTap" data-page="rulesTraining" wx:if="{{isWorker}}">
          <text class="menu-icon">📘</text>
          <text class="menu-text">平台规则/培训</text>
          <text class="menu-arrow">></text>
        </view>
      </view>
    </view>
    <view class="menu-group card" wx:if="{{isLogin && isPlatform}}">
      <view class="menu-title">平台管理</view>
      <view class="menu-list">
        <view class="menu-item" bindtap="onMenuTap" data-page="interviewAdmin">
          <text class="menu-icon">🛠️</text>
          <text class="menu-text">面试管理</text>
          <text class="menu-arrow">></text>
        </view>
      </view>
    </view>
    <!-- 更多服务 -->
    <view class="menu-group card">
      <view class="menu-title">更多服务</view>
      <view class="menu-list">
        <view class="menu-item" bindtap="onMenuTap" data-page="contact">
          <text class="menu-icon">📞</text>
          <text class="menu-text">联系客服</text>
          <text class="menu-arrow">></text>
        </view>
        <view class="menu-item" bindtap="onMenuTap" data-page="subscribeNotify">
          <text class="menu-icon">🔔</text>
          <text class="menu-text">消息通知</text>
          <text class="menu-arrow">></text>
        </view>
        <view class="menu-item" bindtap="onMenuTap" data-page="about">
          <text class="menu-icon">ℹ️</text>
          <text class="menu-text">关于我们</text>
          <text class="menu-arrow">></text>
        </view>
      </view>
    </view>
  </view>
  <!-- 退出登录 -->
  <view class="logout-section" wx:if="{{isLogin}}">
    <button class="btn-logout" bindtap="onLogout">退出登录</button>
  </view>
  <!-- 底部占位 -->
  <view class="bottom-placeholder"></view>
</view>