<!-- 预约页面 -->
<view class="booking-page">
  <!-- 阿姨信息 -->
  <view class="worker-card card" wx:if="{{worker.id}}">
    <image class="worker-avatar" src="{{worker.avatar}}" mode="aspectFill"/>
    <view class="worker-info">
      <text class="worker-name">{{worker.name}}</text>
      <view class="worker-tags">
        <text class="tag">{{worker.age}}岁</text>
        <text class="tag">{{worker.experience}}年经验</text>
      </view>
      <view class="worker-price">
        <text class="price-unit">¥</text>
        <text class="price-value">{{worker.price}}</text>
        <text class="price-unit">/月</text>
      </view>
    </view>
  </view>
  
  <!-- 服务类型选择 -->
  <view class="section-card card">
    <view class="section-title">选择服务类型</view>
    <view class="service-types">
      <view 
        class="type-item {{selectedServiceType === item.id ? 'active' : ''}}"
        wx:for="{{serviceTypes}}"
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="onSelectServiceType"
      >
        <text class="type-name">{{item.name}}</text>
        <text class="type-desc">{{item.desc}}</text>
      </view>
    </view>
  </view>
  
  <!-- 服务时间选择 -->
  <view class="section-card card">
    <view class="section-title">选择服务时间</view>
    
    <!-- 开始日期 -->
    <view class="form-item">
      <text class="item-label">开始日期</text>
      <picker mode="date" value="{{startDate}}" start="{{minDate}}" bindchange="onStartDateChange">
        <view class="picker-value {{startDate ? '' : 'placeholder'}}">
          {{startDate || '请选择开始日期'}}
        </view>
      </picker>
    </view>
    
    <!-- 服务时长 -->
    <view class="form-item">
      <text class="item-label">服务时长</text>
      <picker mode="selector" range="{{durationOptions}}" value="{{durationIndex}}" bindchange="onDurationChange">
        <view class="picker-value {{durationIndex >= 0 ? '' : 'placeholder'}}">
          {{durationIndex >= 0 ? durationOptions[durationIndex] : '请选择服务时长'}}
        </view>
      </picker>
    </view>
    
    <!-- 每日时长（临时服务） -->
    <view class="form-item" wx:if="{{selectedServiceType === 'temporary'}}">
      <text class="item-label">每日时长</text>
      <picker mode="selector" range="{{dailyHoursOptions}}" value="{{dailyHoursIndex}}" bindchange="onDailyHoursChange">
        <view class="picker-value {{dailyHoursIndex >= 0 ? '' : 'placeholder'}}">
          {{dailyHoursIndex >= 0 ? dailyHoursOptions[dailyHoursIndex] : '请选择每日时长'}}
        </view>
      </picker>
    </view>
  </view>
  
  <!-- 联系信息 -->
  <view class="section-card card">
    <view class="section-title">联系信息</view>
    
    <!-- 联系人 -->
    <view class="form-item">
      <text class="item-label">联系人</text>
      <input 
        class="item-input" 
        type="text" 
        placeholder="请输入联系人姓名"
        value="{{contactName}}"
        bindinput="onContactNameInput"
      />
    </view>
    
    <!-- 联系电话 -->
    <view class="form-item">
      <text class="item-label">联系电话</text>
      <input 
        class="item-input" 
        type="number" 
        placeholder="请输入联系电话"
        value="{{contactPhone}}"
        bindinput="onContactPhoneInput"
        maxlength="11"
      />
    </view>
    
    <!-- 服务地址 -->
    <view class="form-item">
      <text class="item-label">服务地址</text>
      <textarea 
        class="item-textarea" 
        placeholder="请输入详细服务地址"
        value="{{address}}"
        bindinput="onAddressInput"
        maxlength="200"
      />
    </view>
  </view>
  
  <!-- 特殊需求 -->
  <view class="section-card card">
    <view class="section-title">特殊需求</view>
    <textarea 
      class="remark-textarea" 
      placeholder="请描述您的特殊需求，如：家庭成员情况、饮食偏好、特殊要求等..."
      value="{{remark}}"
      bindinput="onRemarkInput"
      maxlength="500"
    />
    <text class="word-count">{{remark.length}}/500</text>
  </view>
  
  <!-- 价格明细 -->
  <view class="price-card card">
    <view class="price-row">
      <text class="price-label">服务费用</text>
      <text class="price-value">¥{{servicePrice}}</text>
    </view>
    <view class="price-row" wx:if="{{selectedServiceType === 'temporary'}}">
      <text class="price-label">每日时长费用</text>
      <text class="price-value">¥{{hourlyPrice}} x {{totalDays}}天</text>
    </view>
    <view class="divider"></view>
    <view class="price-row total">
      <text class="price-label">合计</text>
      <text class="price-total">¥{{totalPrice}}</text>
    </view>
  </view>
  
  <!-- 底部占位 -->
  <view class="bottom-placeholder"></view>
  
  <!-- 底部提交栏 -->
  <view class="bottom-bar">
    <view class="price-info">
      <text class="price-label">合计：</text>
      <text class="price-value">
        <text class="unit">¥</text>
        <text class="value">{{totalPrice}}</text>
      </text>
    </view>
    <button class="btn-submit {{isSubmitting ? 'disabled' : ''}}" bindtap="onSubmit">
      {{isSubmitting ? '提交中...' : '提交预约'}}
    </button>
  </view>
</view>
